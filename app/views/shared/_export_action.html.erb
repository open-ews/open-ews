<% filter_params = request.query_parameters.fetch(:filter, {}).compact %>
<% disabled = local_assigns.fetch(:disabled, false) %>
<% disabled_title = local_assigns.fetch(:disabled_title, "Export") %>

<span class="d-inline-block" tabindex="0" data-bs-toggle="tooltip" title="<%= disabled_title if disabled %>">
  <%= button_to(
    dashboard_exports_path(
      export: export_params.reverse_merge(filter_params: filter_params)
    ),
    class: "btn",
    method: :post,
    disabled: disabled,
    form: { data: { turbo_confirm: ("You haven't selected any filters. Are you sure you still want to export all records?" if filter_params.blank?) }}
    ) do %>
    <i class="icon ti ti-file-export"></i> Export
  <% end %>
</span>
